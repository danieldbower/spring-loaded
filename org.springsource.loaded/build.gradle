apply plugin: 'java'

version = '1.0.0'

repositories {
    mavenLocal()
    mavenCentral()
}

configurations {
    jarjar
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.10'
    compile 'asm:asm:3.2','asm:asm-tree:3.2','asm:asm-commons:3.2','asm:asm-util:3.2'
}

jar {
    manifest {
        attributes('Implementation-Title':'org.springsource.loaded', 'Specification-Title':'SpringLoaded Agent',
            'Implementation-Version': version, 'Specification-Version': version, 
            'Implementation-Vendor':'SpringSource', 'Specification-Vendor':'SpringSource',
            'Premain-Class':'org.springsource.loaded.agent.SpringLoadedAgent','Can-Redefine-Classes':'true')
    }
}

task dist(dependsOn:'jar') << {
    ant.taskdef(
        name: 'jarjar', classname: 'com.tonicsystems.jarjar.JarJarTask'
        classpath {
            fileset(dir: 'tools', includes: 'jarjar-*.jar')
        }
    )
    
}
